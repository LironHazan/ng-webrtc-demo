{"version":3,"sources":["/Users/liron/dev/angular-p/ng-webrtc-demo/src/$_gendir lazy","/Users/liron/dev/angular-p/ng-webrtc-demo/src/app/app.component.css","/Users/liron/dev/angular-p/ng-webrtc-demo/src/app/app.component.html","/Users/liron/dev/angular-p/ng-webrtc-demo/src/app/app.component.ts","/Users/liron/dev/angular-p/ng-webrtc-demo/src/app/app.module.ts","/Users/liron/dev/angular-p/ng-webrtc-demo/src/environments/environment.ts","/Users/liron/dev/angular-p/ng-webrtc-demo/src/main.ts","/Users/liron/dev/angular-p/ng-webrtc-demo/src/rtc-media-recorder/rtc-media-recorder.component.css","/Users/liron/dev/angular-p/ng-webrtc-demo/src/rtc-media-recorder/rtc-media-recorder.component.html","/Users/liron/dev/angular-p/ng-webrtc-demo/src/rtc-media-recorder/rtc-media-recorder.component.ts","/Users/liron/dev/angular-p/ng-webrtc-demo/src/rtc-media-recorder/rtc-media-recorder.module.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"../../../../../src/$$_gendir lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/$$_gendir lazy\n// module id = ../../../../../src/$$_gendir lazy recursive\n// module chunks = main","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".webrtc-demo-app {\\n  font-family: Arial, Helvetica, sans-serif;\\n  text-align: center;\\n}\\nh1 {\\n  color: #369;\\n  font-family: Arial, Helvetica, sans-serif;\\n  font-size: 250%;\\n}\\nh2, h3 {\\n  color: #444;\\n  font-family: Arial, Helvetica, sans-serif;\\n  font-weight: lighter;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/app/app.component.css\n// module id = ../../../../../src/app/app.component.css\n// module chunks = main","module.exports = \"<div class=\\\"webrtc-demo-app\\\">\\n  <h1> Angular webRTC recorder demo app </h1>\\n  <hr>\\n\\n  <div>\\n    <h2> RtcMediaRecorderComponent in practice</h2>\\n    <ng-rtc-media-recorder [constrains]=\\\"constrains\\\"\\n                           (startRecording)=\\\"announceStart($event)\\\" (fetchRecording)=\\\"handleVideoStream($event)\\\">\\n    </ng-rtc-media-recorder>\\n  </div>\\n  <hr>\\n  <div>\\n    <h2> RtcMediaRecorderComponent (showVideoPlayer=false) </h2>\\n    <ng-rtc-media-recorder [constrains]=\\\"constrains\\\"\\n                           [showVideoPlayer]=\\\"false\\\"\\n                           (startRecording)=\\\"announceStart($event)\\\" (fetchRecording)=\\\"handleVideoStream($event)\\\">\\n    </ng-rtc-media-recorder>\\n  </div>\\n  <hr>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = main","import {Component, OnInit} from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  format = 'video/webm';\n  constrains = {video: true, audio: false};\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  public handleVideoStream(blob) {\n    // can send it to a server or play in another video player etc..\n    console.log('do something with the recording' + blob);\n  }\n\n  announceStart() {\n    alert('Start recording!');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppComponent } from './app.component';\nimport { RtcMediaRecorderModule } from '../rtc-media-recorder/rtc-media-recorder.module';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n  ],\n  imports: [\n    BrowserModule, RtcMediaRecorderModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/app/app.module.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\n\n\n// WEBPACK FOOTER //\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/main.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".video-rec {\\n  width: 70%;\\n  background-color: gray;\\n}\\n.rec-actions button {\\n  text-transform: capitalize;\\n}\\n.hide-video-player {\\n  visibility: hidden;\\n  height: 0;\\n  width: 0;\\n}\\nbutton {\\n  cursor: pointer;\\n  background-color: #444;\\n  color: white;\\n  border: none;\\n  border-radius: 3px;\\n}\\nbutton:hover {\\n  background-color: black;\\n\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/rtc-media-recorder/rtc-media-recorder.component.css\n// module id = ../../../../../src/rtc-media-recorder/rtc-media-recorder.component.css\n// module chunks = main","module.exports = \"<div class=\\\"rec-player\\\">\\n  <video [ngClass]=\\\"{'hide-video-player': !showVideoPlayer}\\\" class=\\\"video-rec\\\" #recVideo autoplay muted controls></video>\\n  <div class=\\\"rec-actions\\\">\\n    <div *ngIf=\\\"hideStopBtn\\\">\\n      <button (click)=\\\"start()\\\"> Start recording </button>\\n      <button *ngIf=\\\"showVideoPlayer && recordedBlobs\\\" (click)=\\\"play()\\\"> Play </button>\\n      <button *ngIf=\\\"recordedBlobs\\\" (click)=\\\"download()\\\"> Download </button>\\n    </div>\\n    <button *ngIf=\\\"!hideStopBtn\\\" (click)=\\\"stop()\\\"> Stop </button>\\n  </div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/rtc-media-recorder/rtc-media-recorder.component.html\n// module id = ../../../../../src/rtc-media-recorder/rtc-media-recorder.component.html\n// module chunks = main","import { Component, OnInit, ViewChild, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'ng-rtc-media-recorder',\n  templateUrl: './rtc-media-recorder.component.html',\n  styleUrls: ['./rtc-media-recorder.component.css']\n})\nexport class RtcMediaRecorderComponent implements OnInit {\n  @ViewChild('recVideo') recVideo: any;\n\n  @Input() constrains = {video: true, audio: true};\n  @Input() fileName = 'my_recording';\n  @Input() showVideoPlayer = true;\n\n  @Output() startRecording = new EventEmitter();\n  @Output() downloadRecording = new EventEmitter();\n  @Output() fetchRecording = new EventEmitter();\n\n  format = 'video/webm';\n  _navigator = <any> navigator;\n  localStream;\n  video;\n  mediaRecorder;\n  recordedBlobs = null;\n  hideStopBtn = true;\n\n  constructor() {}\n\n  ngOnInit() {\n    console.log('creating MediaRecorder for mimeType: ' + this.format);\n    if (this.recVideo) {\n      this.video = this.recVideo.nativeElement;\n    }\n\n    this._navigator.getUserMedia = ( this._navigator.getUserMedia || this._navigator.webkitGetUserMedia\n    || this._navigator.mozGetUserMedia || this._navigator.msGetUserMedia );\n  }\n\n  private _initStream(constrains, navigator) {\n    return navigator.mediaDevices.getUserMedia(constrains)\n      .then((stream) => {\n        this.localStream = stream;\n        return window.URL ? window.URL.createObjectURL(stream) : stream;\n      })\n      .catch(err => err);\n  }\n  private _stopStream() {\n    const tracks = this.localStream.getTracks();\n    tracks.forEach((track) => {\n      track.stop();\n    });\n  }\n\n  public start() {\n    console.log('start recording');\n    this.recordedBlobs = [];\n    this._initStream(this.constrains, this._navigator)\n      .then((stream) => {\n        if (!window['MediaRecorder'].isTypeSupported(this.format)) {\n          console.log(this.format + ' is not Supported');\n          return;\n        }\n        try {\n          this.mediaRecorder = new window['MediaRecorder'](this.localStream, {mimeType: this.format});\n          if (this.video) {\n            this.video.src = stream;\n          }\n          this.startRecording.emit(stream);\n        } catch (e) {\n          console.error('Exception while creating MediaRecorder: ' + e);\n          return;\n        }\n        console.log('Created MediaRecorder', this.mediaRecorder, 'with options', this.format);\n        this.hideStopBtn = false;\n        this.mediaRecorder.ondataavailable =\n          (event) => {\n            if (event.data && event.data.size > 0) {\n              this.recordedBlobs.push(event.data);\n            }};\n        this.mediaRecorder.start(10); // collect 10ms of data\n      });\n  }\n\n  public stop() {\n    console.log('stop recording');\n    this.hideStopBtn = true;\n\n    this._stopStream();\n    this.mediaRecorder.stop();\n    this.fetchRecording.emit(this.recordedBlobs);\n    if (this.video) {\n      this.video.controls = true;\n    }\n  }\n\n  public play() {\n    if (!this.video) {\n      return;\n    }\n    console.log('play recorded stream');\n    const superBuffer = new Blob(this.recordedBlobs, {type: this.format});\n    this.video.src = window.URL.createObjectURL(superBuffer);\n  }\n\n  public download() {\n    console.log('download recorded stream');\n    const timestamp = new Date().getUTCMilliseconds();\n    const blob = new Blob(this.recordedBlobs, {type: this.format});\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.style.display = 'none';\n    a.href = url;\n    a.download = timestamp + '__' + this.fileName + '.webm';\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(() => {\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n      this.downloadRecording.emit();\n    }, 100);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/rtc-media-recorder/rtc-media-recorder.component.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RtcMediaRecorderComponent } from './rtc-media-recorder.component';\n\n@NgModule({\n  declarations: [\n    RtcMediaRecorderComponent\n  ],\n  exports: [RtcMediaRecorderComponent],\n  imports: [CommonModule],\n  providers: [],\n})\nexport class RtcMediaRecorderModule { }\n\n\n\n// WEBPACK FOOTER //\n// /Users/liron/dev/angular-p/ng-webrtc-demo/src/rtc-media-recorder/rtc-media-recorder.module.ts"],"sourceRoot":"webpack:///"}